# Асинхронный Бот-Воронка для Мессенджеров

Проект - тестовое техническое задание для компании "Smedia Buying Holding"

## Начало работы

Для начала работы с проектом необходимо выполнить следующие шаги.

### Предварительные требования

Убедитесь, что у вас установлен `Python` версии 3.10 или выше. Вы можете скачать его
с [официального сайта Python](https://www.python.org/downloads/).

### Установка

Склонируйте репозиторий и установите зависимости проекта, используя следующие команды:

```bash
# Клонирование репозитория
git clone https://github.com/Oldweedkeeper2/TgFunnel

# Переход в каталог проекта
cd TgFunnel

# Установка зависимостей
pip install -r requirements.txt
```

## Конфигурация

Для того, чтобы бот мог начать работе - создайте файл .env и выполните конфигурацию приложения.

### Триггерные слова

`TRIGGER_WORDS` - список слов или фраз, на которые бот будет реагировать для изменения потока сообщений или завершения
воронки. Пример:

```python
TRIGGER_WORDS = ["прекрасно", "ожидать"]
```

### Сообщения воронки

`MESSAGES` - список сообщений, которые бот будет отправлять пользователям. Каждое сообщение имеет индекс (порядок в
последовательности), задержку перед отправкой и текст сообщения. Пример:

```python
from datetime import timedelta

MESSAGES = [
    {"index": 1, "delay": timedelta(seconds=6), "text": "Текст1"},
    {"index": 2, "delay": timedelta(seconds=8), "text": "Текст2"},
    {"index": 3, "delay": timedelta(seconds=12), "text": "Текст3"}
]
```

### Параметры базы данных

`DATABASE_URL` - строка подключения к базе данных. Пример использования с PostgreSQL:

```python
DATABASE_URL: str = "postgresql+asyncpg://login:password@localhost/dbname"
```

### Параметры логирования

`LOG_DIR` - директория, куда будут сохраняться логи работы бота. Пример:

```python
LOG_DIR: str = "./logs"
```

### Параметры API Telegram

Для работы с Telegram API необходимо указать следующие параметры:

- `API_ID` - идентификатор приложения, полученный в Telegram.
- `API_HASH` - хеш приложения, полученный в Telegram.
- `API_NAME` - имя вашего аккаунта в Telegram.

```python
API_ID = 123456
API_HASH = "0123456789abcdef0123456789abcdef"
API_NAME = "my_account"
```

### Использование

Предварительно, перед запуском бота, чтобы создать таблицы, используйте команду:
```bash
python data/models/models.py
```

Для запуска бота используйте следующую команду:

```bash
python main.py
```

Предварительно вы должны настроить все необходимые параметры конфигурации в соответствии с требованиями.

### Технологии

Cтек технологий и библиотеки:

- `Python 3.10+`
- `SQLAlchemy`
- `Pydantic`
- `Pyrogram`

### Контакты

Если у вас есть вопросы или предложения, вы всегда можете написать мне в тг: <b>[@Oldweedkeeper](https://t.me/Oldweedkeeper)